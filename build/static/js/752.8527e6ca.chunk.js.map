{"version":3,"file":"static/js/752.8527e6ca.chunk.js","mappings":"oIAEA,MAcA,EAdoBA,CAACC,EAAeC,KAClC,IAAIC,GAAUC,EAAAA,EAAAA,UAEd,OAAO,WAAyB,IAAD,IAAAC,EAAAC,UAAAC,OAAXC,EAAI,IAAAC,MAAAJ,GAAAK,EAAA,EAAAA,EAAAL,EAAAK,IAAJF,EAAIE,GAAAJ,UAAAI,GAClBP,EAAQQ,SACVC,aAAaT,EAAQQ,SAGvBR,EAAQQ,QAAUE,YAAW,KAC3BX,EAASM,EAAK,GACbP,EACL,CAAC,C,4LCbH,MAaA,EAbgBa,IAAmB,OAAbC,GAAOD,EAC3B,OACEE,EAAAA,EAAAA,KAAA,OAAKC,MAAO,IAAKF,GAASG,QAAQ,YAAYC,KAAK,OAAMC,UACvDJ,EAAAA,EAAAA,KAAA,QACEK,SAAS,UACTC,SAAS,UACTC,EAAE,imBACFJ,KAAK,UAEH,ECIV,EAbkBL,IAAmB,OAAbC,GAAOD,EAC7B,OACEE,EAAAA,EAAAA,KAAA,OAAKC,MAAO,IAAKF,GAASG,QAAQ,YAAYC,KAAK,OAAMC,UACvDJ,EAAAA,EAAAA,KAAA,QACEK,SAAS,UACTC,SAAS,UACTC,EAAE,mkBACFJ,KAAK,UAEH,EC2MV,EAnMaK,KACX,MAAOC,EAAOC,IAAYC,EAAAA,EAAAA,UAAiB,KACpCC,EAAMC,IAAWF,EAAAA,EAAAA,UAAiB,KAClCG,EAAUC,IAAeJ,EAAAA,EAAAA,UAAiB,KAC1CK,EAAeC,IAAoBN,EAAAA,EAAAA,UAA2B,KAC9DO,EAAWC,IAAgBR,EAAAA,EAAAA,UAA2B,KACtDS,EAAYC,IAAiBV,EAAAA,EAAAA,UAA2B,KACxDW,EAAWC,IAAcZ,EAAAA,EAAAA,WAAkB,IAC3Ca,EAAQC,IAAad,EAAAA,EAAAA,WAAkB,IACvCe,EAAQC,IAAahB,EAAAA,EAAAA,UAAiB,SACtCiB,EAAOC,IAAYlB,EAAAA,EAAAA,UAAiB,IAErCmB,GAAWC,EAAAA,EAAAA,KACXC,GAAWC,EAAAA,EAAAA,MAEXC,GAAqBlD,EAAAA,EAAAA,GAAY,KAAMmD,IAC3C,MAAMC,EAAQD,EAAI,GACbC,IAEDA,EAAM7C,OAAS,GAAK6C,EAAM7C,OAAS,GACrC4B,EAAa,qNAEbA,GAAa,GACf,IAGIkB,GAAyBrD,EAAAA,EAAAA,GAAY,KAAMmD,IAC/C,MAAMC,EAAQD,EAAI,GAEbC,IAEDA,EAAM7C,OAAS,GAAK6C,EAAM7C,OAAS,GACrC0B,EAAiB,iOAJQ,cAKIqB,KAAKF,GAGlCnB,GAAiB,GAFjBA,EAAiB,gWAGnB,IAGIsB,GAAsBvD,EAAAA,EAAAA,GAAY,KAAMmD,IAC5C,MAAMC,EAAQD,EAAI,GAEbC,IAEDA,EAAM7C,OAAS,GAAK6C,EAAM7C,OAAS,KAHpB,mDAGsC+C,KAAKF,GAC5Df,EAAc,2GAEdA,GAAc,GAChB,IAGImB,GAAWpD,EAAAA,EAAAA,QAAyB,MACpCqD,GAAcrD,EAAAA,EAAAA,QAAyB,MACvCsD,GAAUtD,EAAAA,EAAAA,QAAyB,MAoBnCuD,EAAeC,UACnBrB,GAAW,SACLsB,EAAAA,EAAYC,aAAarC,EAAOK,EAAUF,EAAMc,GACnDqB,MAAMC,IAA2C,IAADC,EAC/C,MAAMC,EAAOC,EAAAA,EAAYC,eAAeJ,GACxClB,GAASuB,EAAAA,EAAAA,IAAQH,IACjBpB,GAASwB,EAAAA,EAAAA,IAAcJ,EAAKK,iBAC5BC,aAAaC,QAAQ,QAAsB,QAAfR,EAAED,EAASU,YAAI,IAAAT,OAAA,EAAbA,EAAeU,QAC7C3B,EAAS,IAAI,IAEd4B,OAAOhC,IAAuB,IAADiC,EAC5BtC,GAAW,GACX,MAAMuC,GAAqB,QAAfD,EAACjC,EAAMoB,gBAAQ,IAAAa,OAAA,EAAdA,EAAgBH,OAAoB9B,EAAMmC,QAC3C,wEAARD,EACFzC,EAAcyC,GACG,8GAARA,EACT7C,EAAiB6C,GAEjBjC,EAASiC,EACX,GACA,EAaN,OAVAE,EAAAA,EAAAA,YAAU,KACRnE,YAAW,KACT4B,GAAU,EAAK,GACd,KAAK,GACP,KAEHuC,EAAAA,EAAAA,YAAU,KAAO,IAADC,EACE,QAAhBA,EAAAzB,EAAS7C,eAAO,IAAAsE,GAAhBA,EAAkBC,OAAO,GACxB,CAAC1C,KAGF2C,EAAAA,EAAAA,MAAA,QAAMC,UAAU,eAAchE,SAAA,EAC5B+D,EAAAA,EAAAA,MAAA,OAAKC,UAAU,yBAAwBhE,SAAA,EACrC+D,EAAAA,EAAAA,MAAA,OAAKC,UAAU,qBAAoBhE,SAAA,EACjCJ,EAAAA,EAAAA,KAAA,KAAAI,SAAG,kGACHJ,EAAAA,EAAAA,KAAA,aAEDwB,IACC2C,EAAAA,EAAAA,MAAAE,EAAAA,SAAA,CAAAjE,SAAA,EACEJ,EAAAA,EAAAA,KAACsE,EAAAA,EAAU,CACTC,UAAW/B,EACXJ,MAAO3B,EACP+D,SAnDSpC,IACnBf,EAAc,IACdX,EAAS0B,GACTG,EAAoBH,EAAM,EAiDhBR,MAAOR,EACPqD,KAAK,OACLC,MAAM,oDACNC,UAAYC,IACc,IAADC,EAAT,UAAVD,EAAEE,MACJF,EAAEG,iBACiB,QAAnBF,EAAApC,EAAY9C,eAAO,IAAAkF,GAAnBA,EAAqBX,QACvB,KAGJlE,EAAAA,EAAAA,KAACsE,EAAAA,EAAU,CACTC,UAAW9B,EACXL,MAAOtB,EACP0D,SAvEYpC,IACtBnB,EAAiB,IACjBF,EAAYqB,GACZC,EAAuBD,EAAM,EAqEnBR,MAAOZ,EACPyD,KAAK,OACLC,MAAM,wFACNC,UAAYC,IACc,IAADI,EAAT,UAAVJ,EAAEE,MACJF,EAAEG,iBACa,QAAfC,EAAAtC,EAAQ/C,eAAO,IAAAqF,GAAfA,EAAiBd,QACnB,KAGJlE,EAAAA,EAAAA,KAACsE,EAAAA,EAAU,CACTC,UAAW7B,EACXN,MAAOxB,EACP4D,SA3FYpC,IACtBjB,EAAa,IACbN,EAAQuB,GACRF,EAAmBE,EAAM,EAyFfR,MAAOV,EACPuD,KAAK,WACLC,MAAM,kFACNC,UAAYC,IACI,UAAVA,EAAEE,MACJF,EAAEG,iBACFpC,IACF,KAGJwB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,4BAA2BhE,SAAA,EACxCJ,EAAAA,EAAAA,KAAA,KAAAI,SAAG,mEACH+D,EAAAA,EAAAA,MAAA,OAAA/D,SAAA,EACE+D,EAAAA,EAAAA,MAAA,UACEc,QAASA,IAAMtD,EAAU,QACzB1B,MAAO,CAAEiF,QAAoB,SAAXxD,EAAoB,EAAI,IAAMtB,SAAA,EAEhDJ,EAAAA,EAAAA,KAACmF,EAAO,CAACC,OAAO,SAAS,iDAG3BjB,EAAAA,EAAAA,MAAA,UACEc,QAASA,IAAMtD,EAAU,UACzB1B,MAAO,CAAEiF,QAAoB,WAAXxD,EAAsB,EAAI,IAAMtB,SAAA,EAElDJ,EAAAA,EAAAA,KAACqF,EAAS,CAACD,OAAO,SAAS,uDAKjCjB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,sBAAqBhE,SAAA,EAClCJ,EAAAA,EAAAA,KAAA,OAAKoE,UAAU,sBAAqBhE,SAAEkB,IAAatB,EAAAA,EAAAA,KAACsF,EAAAA,EAAa,OAC9C,IAAlBtE,IAA0C,IAAfI,IAAsC,IAAdF,GAClDlB,EAAAA,EAAAA,KAAA,UAAQiF,QAAStC,EAAcyB,UAAU,uBAAsBhE,SAAC,kHAIhEJ,EAAAA,EAAAA,KAAA,OAAKoE,UAAU,yBAAwBhE,SAAC,2HAMlDJ,EAAAA,EAAAA,KAAA,OAAKoE,UAAU,uBAAsBhE,SAAEwB,MAClC,EC7LX,EAbqBe,KAEjBwB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,YAAWhE,SAAA,EACxBJ,EAAAA,EAAAA,KAACuF,EAAAA,EAAU,KACXpB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,sBAAqBhE,SAAA,EAClCJ,EAAAA,EAAAA,KAACwF,EAAAA,EAAM,CAACf,KAAK,kBACbzE,EAAAA,EAAAA,KAACQ,EAAI,KACLR,EAAAA,EAAAA,KAACyF,EAAAA,EAAM,S","sources":["hooks/useDebounce.ts","images/MaleSvg.tsx","images/FemaleSvg.tsx","pages/registration/Main.tsx","pages/registration/Registration.tsx"],"sourcesContent":["import { useRef } from \"react\";\n\nconst useDebounce = (delay: number, callback: Function) => {\n  let timeout = useRef<NodeJS.Timeout>();\n\n  return function (...args: any) {\n    if (timeout.current) {\n      clearTimeout(timeout.current);\n    }\n\n    timeout.current = setTimeout(() => {\n      callback(args);\n    }, delay);\n  };\n};\n\nexport default useDebounce;\n","const MaleSvg = ({ ...props }) => {\n  return (\n    <svg style={{ ...props }} viewBox=\"0 0 24 24\" fill=\"none\">\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M15 3C15 2.44772 15.4477 2 16 2H20C21.1046 2 22 2.89543 22 4V8C22 8.55229 21.5523 9 21 9C20.4477 9 20 8.55228 20 8V5.41288L15.4671 9.94579C15.4171 9.99582 15.363 10.0394 15.3061 10.0767C16.3674 11.4342 17 13.1432 17 15C17 19.4183 13.4183 23 9 23C4.58172 23 1 19.4183 1 15C1 10.5817 4.58172 7 9 7C10.8559 7 12.5642 7.63197 13.9214 8.69246C13.9587 8.63539 14.0024 8.58128 14.0525 8.53118L18.5836 4H16C15.4477 4 15 3.55228 15 3ZM9 20.9963C5.68831 20.9963 3.00365 18.3117 3.00365 15C3.00365 11.6883 5.68831 9.00365 9 9.00365C12.3117 9.00365 14.9963 11.6883 14.9963 15C14.9963 18.3117 12.3117 20.9963 9 20.9963Z\"\n        fill=\"blue\"\n      />\n    </svg>\n  );\n};\n\nexport default MaleSvg;\n","const FemaleSvg = ({ ...props }) => {\n  return (\n    <svg style={{ ...props }} viewBox=\"0 0 24 24\" fill=\"none\">\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M20 9C20 13.0803 16.9453 16.4471 12.9981 16.9383C12.9994 16.9587 13 16.9793 13 17V19H14C14.5523 19 15 19.4477 15 20C15 20.5523 14.5523 21 14 21H13V22C13 22.5523 12.5523 23 12 23C11.4477 23 11 22.5523 11 22V21H10C9.44772 21 9 20.5523 9 20C9 19.4477 9.44772 19 10 19H11V17C11 16.9793 11.0006 16.9587 11.0019 16.9383C7.05466 16.4471 4 13.0803 4 9C4 4.58172 7.58172 1 12 1C16.4183 1 20 4.58172 20 9ZM6.00365 9C6.00365 12.3117 8.68831 14.9963 12 14.9963C15.3117 14.9963 17.9963 12.3117 17.9963 9C17.9963 5.68831 15.3117 3.00365 12 3.00365C8.68831 3.00365 6.00365 5.68831 6.00365 9Z\"\n        fill=\"pink\"\n      />\n    </svg>\n  );\n};\n\nexport default FemaleSvg;\n","import { useEffect, useRef, useState } from \"react\";\nimport \"./Main.scss\";\nimport { SpinnerLoader } from \"../../components/Loader\";\nimport InputField from \"../login/InputField\";\nimport useDebounce from \"../../hooks/useDebounce\";\nimport { useAppDispatch } from \"../../hooks/redux\";\nimport { useNavigate } from \"react-router-dom\";\nimport { AxiosResponse, AxiosError } from \"axios\";\nimport { AuthResponse } from \"../../models/Auth.model\";\nimport { setCurrentDir } from \"../../redux/fileSlice\";\nimport { setUser } from \"../../redux/userSlice\";\nimport AuthService from \"../../services/AuthService\";\nimport UserService from \"../../services/UserService\";\nimport ChooseGender from \"./ChooseGender\";\nimport MaleSvg from \"../../images/MaleSvg\";\nimport FemaleSvg from \"../../images/FemaleSvg\";\n\nconst Main = () => {\n  const [email, setEmail] = useState<string>(\"\");\n  const [pass, setPass] = useState<string>(\"\");\n  const [username, setUsername] = useState<string>(\"\");\n  const [usernameError, setUsernameError] = useState<string | boolean>(\"\");\n  const [passError, setPassError] = useState<string | boolean>(\"\");\n  const [emailError, setEmailError] = useState<string | boolean>(\"\");\n  const [isLoading, setLoading] = useState<boolean>(false);\n  const [isDone, setIsDone] = useState<boolean>(false);\n  const [gender, setGender] = useState<string>(\"male\");\n  const [error, setError] = useState<string>(\"\");\n\n  const dispatch = useAppDispatch();\n  const navigate = useNavigate();\n\n  const debouncedPassCheck = useDebounce(500, (arr: string[]) => {\n    const value = arr[0];\n    if (!value) return;\n\n    if (value.length < 6 || value.length > 32) {\n      setPassError(\"Длина пароля должна быть от 6 до 32 символов\");\n    } else {\n      setPassError(false);\n    }\n  });\n\n  const debouncedUsernameCheck = useDebounce(500, (arr: string[]) => {\n    const value = arr[0];\n    const latinAlphabetRegex = /^[a-zA-Z]+$/;\n    if (!value) return;\n\n    if (value.length < 2 || value.length > 16) {\n      setUsernameError(\"Длина никнейма должна быть от 2 до 16 символов\");\n    } else if (!latinAlphabetRegex.test(value)) {\n      setUsernameError(\"Никнейм должен состоять только из символов латинского алфавита (a-z, A-Z)\");\n    } else {\n      setUsernameError(false);\n    }\n  });\n\n  const debouncedEmailCheck = useDebounce(500, (arr: string[]) => {\n    const value = arr[0];\n    const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/;\n    if (!value) return;\n\n    if (value.length < 3 || value.length > 64 || !emailRegex.test(value)) {\n      setEmailError(\"Некорректная почта\");\n    } else {\n      setEmailError(false);\n    }\n  });\n\n  const emailRef = useRef<HTMLInputElement>(null);\n  const usernameRef = useRef<HTMLInputElement>(null);\n  const passRef = useRef<HTMLInputElement>(null);\n\n  const changePassword = (value: string) => {\n    setPassError(\"\");\n    setPass(value);\n    debouncedPassCheck(value);\n  };\n\n  const changeUsername = (value: string) => {\n    setUsernameError(\"\");\n    setUsername(value);\n    debouncedUsernameCheck(value);\n  };\n\n  const changeEmail = (value: string) => {\n    setEmailError(\"\");\n    setEmail(value);\n    debouncedEmailCheck(value);\n  };\n\n  const Registration = async () => {\n    setLoading(true);\n    await AuthService.registration(email, username, pass, gender)\n      .then((response: AxiosResponse<AuthResponse>) => {\n        const user = UserService.responseToUser(response);\n        dispatch(setUser(user));\n        dispatch(setCurrentDir(user.root_directory));\n        localStorage.setItem(\"token\", response.data?.access);\n        navigate(\"/\");\n      })\n      .catch((error: AxiosError) => {\n        setLoading(false);\n        const err = (error.response?.data as string) || (error.message as string);\n        if (err === \"Почта занята\") {\n          setEmailError(err);\n        } else if (err === \"Такое имя уже занято\") {\n          setUsernameError(err);\n        } else {\n          setError(err);\n        }\n      });\n  };\n\n  useEffect(() => {\n    setTimeout(() => {\n      setIsDone(true);\n    }, 1200);\n  }, []);\n\n  useEffect(() => {\n    emailRef.current?.focus();\n  }, [isDone]);\n\n  return (\n    <main className=\"regpage_main\">\n      <div className=\"regpage_main-container\">\n        <div className=\"regpage_main-title\">\n          <p>Добро пожаловать!</p>\n          <div />\n        </div>\n        {isDone && (\n          <>\n            <InputField\n              reference={emailRef}\n              value={email}\n              onChange={changeEmail}\n              error={emailError}\n              type=\"text\"\n              title=\"Введите e-mail\"\n              onKeyDown={(e) => {\n                if (e.key === \"Enter\") {\n                  e.preventDefault();\n                  usernameRef.current?.focus();\n                }\n              }}\n            />\n            <InputField\n              reference={usernameRef}\n              value={username}\n              onChange={changeUsername}\n              error={usernameError}\n              type=\"text\"\n              title=\"Введите никнейм\"\n              onKeyDown={(e) => {\n                if (e.key === \"Enter\") {\n                  e.preventDefault();\n                  passRef.current?.focus();\n                }\n              }}\n            />\n            <InputField\n              reference={passRef}\n              value={pass}\n              onChange={changePassword}\n              error={passError}\n              type=\"password\"\n              title=\"Введите пароль\"\n              onKeyDown={(e) => {\n                if (e.key === \"Enter\") {\n                  e.preventDefault();\n                  Registration();\n                }\n              }}\n            />\n            <div className=\"regpage_main-choosegender\">\n              <p>Укажите пол</p>\n              <div>\n                <button\n                  onClick={() => setGender(\"male\")}\n                  style={{ opacity: gender === \"male\" ? 1 : 0.4 }}\n                >\n                  <MaleSvg height=\"100%\" />\n                  Мужской\n                </button>\n                <button\n                  onClick={() => setGender(\"female\")}\n                  style={{ opacity: gender === \"female\" ? 1 : 0.4 }}\n                >\n                  <FemaleSvg height=\"100%\" />\n                  Женский\n                </button>\n              </div>\n            </div>\n            <div className=\"regpage_main-footer\">\n              <div className=\"regpage_main-loader\">{isLoading && <SpinnerLoader />}</div>\n              {usernameError === false && emailError === false && passError === false ? (\n                <button onClick={Registration} className=\"regpage_main-confirm\">\n                  Зарегистрироваться\n                </button>\n              ) : (\n                <div className=\"regpage_main-noconfirm\">Зарегистрироваться</div>\n              )}\n            </div>\n          </>\n        )}\n      </div>\n      <div className=\"loginpage_main-error\">{error}</div>\n    </main>\n  );\n};\n\nexport default Main;\n","import Background from \"../login/Background\";\nimport Footer from \"../login/Footer\";\nimport Header from \"../login/Header\";\nimport Main from \"./Main\";\nimport \"./Registration.scss\";\n\nconst Registration = () => {\n  return (\n    <div className=\"loginpage\">\n      <Background />\n      <div className=\"loginpage_container\">\n        <Header type=\"registration\" />\n        <Main />\n        <Footer />\n      </div>\n    </div>\n  );\n};\n\nexport default Registration;\n"],"names":["useDebounce","delay","callback","timeout","useRef","_len","arguments","length","args","Array","_key","current","clearTimeout","setTimeout","_ref","props","_jsx","style","viewBox","fill","children","fillRule","clipRule","d","Main","email","setEmail","useState","pass","setPass","username","setUsername","usernameError","setUsernameError","passError","setPassError","emailError","setEmailError","isLoading","setLoading","isDone","setIsDone","gender","setGender","error","setError","dispatch","useAppDispatch","navigate","useNavigate","debouncedPassCheck","arr","value","debouncedUsernameCheck","test","debouncedEmailCheck","emailRef","usernameRef","passRef","Registration","async","AuthService","registration","then","response","_response$data","user","UserService","responseToUser","setUser","setCurrentDir","root_directory","localStorage","setItem","data","access","catch","_error$response","err","message","useEffect","_emailRef$current","focus","_jsxs","className","_Fragment","InputField","reference","onChange","type","title","onKeyDown","e","_usernameRef$current","key","preventDefault","_passRef$current","onClick","opacity","MaleSvg","height","FemaleSvg","SpinnerLoader","Background","Header","Footer"],"sourceRoot":""}